{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Update "{{ user['name'] }}"{% endblock %}</h1>
{% endblock %}

{% block content %}
  <div class="row">
    <form method="post" class="col s12 user">
      <div class="row">
        <div class="input-field col s12">
          <select name="role" id="role" class="browser-default" required>
            {% for role in roles %}
              <option value="{{ role }}" {% if user['role'] == role %}selected{% endif %}>{{ role }}</option>
            {% endfor %}
          </select>
          <label for="role">Role</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input type="text" name="username" id="username" class="validate" value="{{ request.form['username'] or user['name'] }}" required>
          <label for="username">Username</label>
        </div>
      </div>
      <button type="submit" class="btn waves-effect waves-light blue darken-1">Update user</button>
    </form>
  </div>

  <div class="divider"></div>

  <div class="row">
    <form action="{{ url_for('user.change_user_password', user_id=user['id']) }}" method="post" class="col s12 user">
      <div class="row">
        <div class="input-field col s12">
          <input type="password" name="new_password" id="new_password" class="validate" required>
          <label for="password">Password</label>
        </div>
      </div>
      <button type="submit" class="btn waves-effect waves-light blue darken-1">Update password</button>
    </form>
  </div>

  <div class="divider"></div>

  <div class="row">
    <form action="{{ url_for('user.delete', user_id=user['id']) }}" method="post" class="col s12 user">
      <button type="submit" class="btn waves-effect waves-light red" onclick="return confirm('Are you sure?');">Delete user</button>
    </form>
  </div>
{% endblock %}